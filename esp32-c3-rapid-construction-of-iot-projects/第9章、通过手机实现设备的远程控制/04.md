### 9.5 设备的远程控制
您已经完成了设备的配网与激活，接下去，在云端绑定您的账号和设备，完成远程控制功能吧。

#### 9.5.1 在云端绑定账号与设备
使用上一章您生成的 secretKey 以及获取的设备 node_id
```http
PUT /v1/user/nodes/mapping
Content-Type: application/json
Authorization: $accesstoken

{
  "node_id": "$node_id",
  "secret_key": "$secretKey",
  "operation": "add"
}
```
完成绑定之后，您已经可以发起远程通信请求了

#### 9.5.2 获取用户的所有设备
获取您账号下所有绑定的设备
```http
GET /v1/user/nodes?node_details=true
Authorization: $accesstoken
```
服务器返回
```json
{
  "nodes": "[ nodeid1, ... ]",
  "node_details": [
    {
      "id": "nodeid1",
      "role": "primary",
      "status": {
        "connectivity": {
          "connected": true,
          "timestamp": 1584698464101
        }
      },
      "config": {
        "node_id": "nodeid1",
        "config_version": "config_version",
        "devices": [
          {}
        ],
        "info": {
          "fw_version": "fw_version",
          "name": "node_name",
          "type": "node_type"
        }
      },
      "params": {
        "Light": {
          "brightness": 0,
          "output": true
        },
        "Switch": {
          "output": true
        }
      }
    }
  ],
  "next_id": "nodeid1",
  "total": 5
}
```

#### 9.5.3 获取设备当前状态
获取指定设备当前的状态
```http
GET /v1/user/nodes/params?node_id=string
Authorization: $accesstoken
```
服务器返回
```json
{
  "Light": {
    "brightness": 0,
    "output": true
  },
  "Switch": {
    "output": true
  }
}
```

### 9.5.4 修改设备状态
修改指定设备的状态，实现远程控制功能
```http
PUT /v1/user/nodes/params
Authorization: $accesstoken

[
  {
    "node_id": "string",
    "payload": {
      "Light": {
        "brightness": 100,
        "output": true
      },
      "Switch": {
        "output": true
      }
    }
  }
]
```

### 9.5.5 小结
至此，您已经完成了应用的基本功能。除了简单的控制之外，RainMaker 支持更多强大有趣的功能，查看接口文档并一一实现这些功能吧。