### 9.2 开发准备
我们需要在一些环境配置和开发工具的下载和安装，然后新建一个空白项目    

#### 9.2.1 Android 的准备
##### 9.2.1.1 Android 的环境与工具
- 系统需求
    - Linux/MacOS/Windows
- 开发工具
    - Android Studio
- 开发语言
    - Kotlin

##### 9.2.1.2 Android 的项目配置
导入 SDK    
在项目根目录 `build.gradle` 中加入
```gradle
buildscript {
    ...
    dependencies {
        ...
        classpath 'com.google.protobuf:protobuf-gradle-plugin:0.8.17'
    }
}
allprojects {
    repositories {
   	 ...
   	 maven { url 'https://jitpack.io' }
    }
}
```

在 app 模块目录 `build.gradle` 中加入
```gradle
plugins {
    ...
    id 'com.google.protobuf'
}

protobuf {
    protoc {
        artifact = 'com.google.protobuf:protoc:3.8.0'
    }
    generateProtoTasks {
        all().each { task ->
            task.builtins {
                java {
                    option 'lite'
                }
            }
        }
    }
}

dependencies {
    ...
    implementation 'org.greenrobot:eventbus:3.2.0'
    implementation 'com.github.espressif:esp-idf-provisioning-android:lib-2.0.10'
}
```

在 app 模块目录 `src/main/proto` 文件夹下放入需要的 proto 文件
- constants.proto
- esp_local_ctrl.proto
- esp_rmaker_claim.proto
- esp_rmaker_user_mapping.proto
    
##### 9.2.1.3 权限申请
在 AndroidManifest.xml 文件内加入需要的权限
```xml
// 位置权限
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
// 蓝牙权限
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
// 网络权限
<uses-permission android:name="android.permission.INTERNET" />
```
其中位置权限除了静态注册，还需要在 Activity 中动态申请
```kotlin
registerForActivityResult(
    ActivityResultContracts.RequestPermission()
) { granted ->
    // 结果回调
}.launch(android.Manifest.permission.ACCESS_FINE_LOCATION)
```

#### 9.2.2 iOS 的准备
##### 9.2.2.1 iOS 的环境与工具
- 系统需求
    - iOS 11.0+ / MacOS 10.12+
- 开发工具
    - Xcode
- 开发语言
    - Swift

##### 9.2.2.2 iOS 的项目配置
导入 SDK    
在 `Podfile` 中加入  
```ruby
pod 'ESPProvision'
```

##### 9.2.2.3 权限申请
在 Xcode 中添加 Capability `Hotspot Configuration`   
在 Xcode 中添加 Capability `Access WiFI information`  
iOS 13及以上系统访问 SSID 需要获取位置权限，在 `info.plist` 中添加 key `NSLocationWhenInUseUsageDescription`  
iOS 14及以上系统本地网络通信需要本地网络权限，在 `info.plist` 中添加 key `NSLocalNetworkUsageDescription`  

#### 9.2.3 小结
完成上述配置所需的库和依赖的下载与更新后，您就可以开始应用的开发了。