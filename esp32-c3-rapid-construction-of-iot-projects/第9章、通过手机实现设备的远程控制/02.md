### 9.3 RainMaker 账号的注册与登录
云端接口的 HOST 为 https://api.rainmaker.espressif.com    
如 9.1 所述，客户端与云端通信采用的是 HTTP 协议和 JSON 数据格式，因此需要在 HTTP 请求中增加 Header: `Content-Type: application/json`    

#### 9.3.1 注册
首先我们需要注册一个新账号，用于后续与设备的绑定和远程控制

1. 创建新用户
```http
POST /v1/user
Content-Type: application/json

{
  "user_name": "username@domain.com",
  "password": "password"
}
```
2. 用户收到验证码后进行验证
```http
POST /v1/user
Content-Type: application/json

{
  "user_name": "username@domain.com",
  "verification_code": "verification_code"
}
```

#### 9.3.2 登录
拥有新账号后，您需要调用登录接口，获取认证用的 token 以及用户的基本信息

1. 请求 accesstoken
```http
POST /v1/login
Content-Type: application/json

{
  "user_name": "username@domain.com",
  "password": "password"
}
```
服务器返回
```json
{
  "status": "success",
  "description": "Login successful",
  "idtoken": "idtoken",
  "accesstoken": "accesstoken",
  "refreshtoken": "refreshtoken"
}
```
- accesstoken: 后续需要用户权限的接口，都需要将此 token 添加到 HTTP 请求 Header 里，格式为 `Authorization: $accesstoken`

2. 请求用户信息
```http
GET /v1/user
Authorization: $accesstoken
```
服务器返回
```json
{
  "user_id": "string",
  "user_name": "string",
  "super_admin": true,
  "picture_url": "string",
  "name": "string",
  "mfa": true,
  "phone_number": "<+Mobile Number with country code>"
}
```
- `user_id` 将在后续配网过程中用到

### 9.3.3 小结
您已经完成了新账号的创建和用户信息的获取，下一步完成设备的配网吧。